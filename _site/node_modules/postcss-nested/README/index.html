<h1>PostCSS Nested</h1>
<p><img align="right" width="135" height="95"
     title="Philosopherâ€™s stone, logo of PostCSS"
     src="http://postcss.github.io/postcss/logo-leftp.svg"></p>
<p><a href="https://github.com/postcss/postcss">PostCSS</a> plugin to unwrap nested rules like how Sass does it.</p>
<pre><code class="language-css">.phone {
    &amp;_title {
        width: 500px;
        @media (max-width: 500px) {
            width: auto;
        }
        body.is_dark &amp; {
            color: white;
        }
    }
    img {
        display: block;
    }
}

.title {
  font-size: var(--font);

  @at-root html {
      --font: 16px
    }
  }
}
</code></pre>
<p>will be processed to:</p>
<pre><code class="language-css">.phone_title {
    width: 500px;
}
@media (max-width: 500px) {
    .phone_title {
        width: auto;
    }
}
body.is_dark .phone_title {
    color: white;
}
.phone img {
    display: block;
}

.title {
  font-size: var(--font);
}
html {
  --font: 16px
}
</code></pre>
<p>Related plugins:</p>
<ul>
<li>Use <a href="https://github.com/komlev/postcss-current-selector"><code>postcss-current-selector</code></a> <strong>after</strong> this plugin if you want
to use current selector in properties or variables values.</li>
<li>Use <a href="https://github.com/toomuchdesign/postcss-nested-ancestors"><code>postcss-nested-ancestors</code></a> <strong>before</strong> this plugin if you want
to reference any ancestor element directly in your selectors with <code>^&amp;</code>.</li>
</ul>
<p>Alternatives:</p>
<ul>
<li>See also <a href="https://github.com/jonathantneal/postcss-nesting"><code>postcss-nesting</code></a>, which implements <a href="https://drafts.csswg.org/css-nesting-1/">CSSWG draft</a>
(requires the <code>&amp;</code> and introduces <code>@nest</code>).</li>
<li><a href="https://github.com/jedmao/postcss-nested-props"><code>postcss-nested-props</code></a> for nested properties like <code>font-size</code>.</li>
</ul>
<a href="https://evilmartians.com/?utm_source=postcss-nested">
<img src="https://evilmartians.com/badges/sponsored-by-evil-martians.svg" alt="Sponsored by Evil Martians" width="236" height="54">
</a>
<h2>Usage</h2>
<pre><code class="language-js">postcss([ require('postcss-nested') ])
</code></pre>
<p>See <a href="https://github.com/postcss/postcss">PostCSS</a> docs for examples for your environment.</p>
<h2>Options</h2>
<h3><code>bubble</code></h3>
<p>By default, plugin will bubble only <code>@media</code> and <code>@supports</code> at-rules.
You can add your custom at-rules to this list by <code>bubble</code> option:</p>
<pre><code class="language-js">postcss([ require('postcss-nested')({ bubble: ['phone'] }) ])
</code></pre>
<pre><code class="language-css">/* input */
a {
  color: white;
  @phone {
    color: black;
  }
}
/* output */
a {
  color: white;
}
@phone {
  a {
    color: black;
  }
}
</code></pre>
<h3><code>unwrap</code></h3>
<p>By default, plugin will unwrap only <code>@font-face</code>, <code>@keyframes</code> and <code>@document</code>
at-rules. You can add your custom at-rules to this list by <code>unwrap</code> option:</p>
<pre><code class="language-js">postcss([ require('postcss-nested')({ unwrap: ['phone'] }) ])
</code></pre>
<pre><code class="language-css">/* input */
a {
  color: white;
  @phone {
    color: black;
  }
}
/* output */
a {
  color: white;
}
@phone {
  color: black;
}
</code></pre>
<h3><code>preserveEmpty</code></h3>
<p>By default, plugin will strip out any empty selector generated by intermediate
nesting levels. You can set <code>preserveEmpty</code> to <code>true</code> to preserve them.</p>
<pre><code class="language-css">.a {
    .b {
        color: black;
    }
}
</code></pre>
<p>Will be compiled to:</p>
<pre><code class="language-css">.a { }
.a .b {
    color: black;
}
</code></pre>
<p>This is especially useful if you want to export the empty classes with <code>postcss-modules</code>.</p>
